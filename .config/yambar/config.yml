red: &red db3e4dff
orange: &orange da4708ff
green: &green 209a15ff
purple: &purple 9c59daff
blue: &blue 227cf0ff

battery_content: &battery_content
  poll-interval: 30000
  content:
    map:
      default:
        string:
          text: "{name} {capacity}% {estimate}"
          margin: 5
      conditions:
        manufacturer == "":
          string:
            text: ""
        state == "charging":
          string:
            text: "{name} {capacity}% {estimate}"
            margin: 5
            deco:
              background:
                color: *green
        capacity < 20:
          string:
            text: "{name} {capacity}% {estimate}"
            margin: 5
            deco:
              background:
                color: *red

bar:
  height: 26
  location: top
  background: 333333ff
  font: sans:size=14
  font-shaping: none
  right-spacing: 2

  left:
    - dwl:
        number-of-tags: 9
        dwl-info-filename: "/run/user/1000/dwl_status"
        name-of-tags: ["1", "2", "3", "4", "5", "6", "7", "8", "9"]
        content:
          list:
            items:
              - map:
                  conditions:
                    # default tag
                    id == 0:
                      string:
                        text: "{layout} {title}"
                        margin: 10
                        font-shaping: full

                    urgent:
                      string:
                        text: "{name}"
                        margin: 10
                        foreground: 000000ff
                        deco:
                          background:
                            color: ffffffff
                    selected:
                      string:
                        text: "{name}"
                        margin: 10
                        deco:
                          background:
                            color: *purple
                    "~empty":
                      string:
                        text: "{name}"
                        margin: 10

  right:
    - script:
        path: /usr/bin/odrsysinfo
        args: ["--yambar"]
        content:
          - string:
              text: "cpu {psi_cpu_avg60}% | io {psi_io_full_avg60}% | mem {psi_mem_full_avg60}%"
              margin: 5

    - mem:
        content:
          map:
            default:
              string:
                text: "MEM {used:mb}M/{total:mb}M"
                margin: 5
            conditions:
              percent_used > 80:
                string:
                  text: "MEM {used:mb}M/{total:mb}M"
                  margin: 5
                  deco:
                    background:
                      color: *red

    - network:
        content:
          map:
            conditions:
              state == "up":
                string:
                  text: "{name} ({ipv4})"
                  margin: 5
                  deco:
                    background:
                      color: *blue

    - battery:
        name: BAT0
        <<: *battery_content

    - battery:
        name: BAT1
        <<: *battery_content

    - clock:
        time-format: "%H:%M:%S"
        date-format: "%F"
        content:
          - string:
              text: "{date} {time}"
              margin: 5
              deco:
                background:
                  color: *purple
